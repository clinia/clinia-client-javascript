<!DOCTYPE html>
<html>
  <head>
    <title>CliniaSearch JavaScript</title>
    <script src="/dist/cliniasearch.js"></script>
  </head>
  <body>
    <script>
      var client = cliniasearch('TODO', 'ClM5vDTmS4GWEL0aS7osJaRkowV8McuP', {
        hosts: {
          write: ['api.partner.staging.clinia.ca'],
          read: ['api.partner.staging.clinia.ca'],
        },
      });

      var queries = [
        {
          indexName: 'health_facility',
          query: 'sons',
          params: {
            queryType: 'prefixLast',
            searchFields: ['name'],
          },
        },
        {
          indexName: 'professional',
          query: 'sons',
          params: {
            queryType: 'prefixLast',
            searchFields: ['name'],
          },
        },
      ];

      client.search(queries, function(err, response) {
        if (err) {
          throw err;
        }

        console.log(response.results);
      });

      var index = client.initIndex('health_facility');

      index.search('sons', function(err, results) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.meta.total + '` results');
        console.log('Here is the first one: ', results.records[0]);
      });

      index.search('jo', { queryType: 'prefix_last' }, function(err, results) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.meta.total + '` results');
        console.log('Here is the first one: ', results.records[0]);
      });

      index.search({ query: 'jo', queryType: 'prefix_last' }, function(
        err,
        results
      ) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.meta.total + '` results');
        console.log('Here is the first one: ', results.records[0]);
      });

      client.suggest(
        'sons',
        { highlightPreTag: '<strong>', highlightPostTag: '</strong>' },
        function(err, suggestions) {
          if (err) {
            throw err;
          }
          console.log('We got `' + suggestions.length + '` suggestions');
          console.log('Here is the first one: ', suggestions[0]);
        }
      );
      client.suggest('sons', function(err, suggestions) {
        if (err) {
          throw err;
        }
        console.log('We got `' + suggestions.length + '` suggestions');
        console.log('Here is the first one: ', suggestions[0]);
      });
      client.suggest(
        {
          query: 'sons',
          highlightPreTag: '<strong>',
          highlightPostTag: '</strong>',
        },
        function(err, suggestions) {
          if (err) {
            throw err;
          }
          console.log('We got `' + suggestions.length + '` suggestions');
          console.log('Here is the first one: ', suggestions[0]);
        }
      );

      var places = client.initPlaces();
      places.suggest('2241 rue asselin', function(err, results) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.length + '` places');
        console.log('Here is the first one: ', results[0]);
      });
      places.suggest('2241 rue asselin', { limit: 2 }, function(err, results) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.length + '` places');
        console.log('Here is the first one: ', results[0]);
      });
      places.suggest({ query: '2241 rue asselin', limit: 2 }, function(
        err,
        results
      ) {
        if (err) {
          throw err;
        }
        console.log('We got `' + results.length + '` places');
        console.log('Here is the first one: ', results[0]);
      });
    </script>
    <div id="div">:)</div>
  </body>
</html>
